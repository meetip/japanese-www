{"version":3,"sources":["../../src/pages/endsubone/endsubone.module.ts","../../src/pages/endsubone/endsubone.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACJ;AAU5C;IAAA;IAAkC,CAAC;IAAtB,mBAAmB;QAR/B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,iEAAa;aACd;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,iEAAa,CAAC;aACxC;SACF,CAAC;OACW,mBAAmB,CAAG;IAAD,0BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZsC;AAC5B;AACe;AAKhB;AAEzC;;;;;GAKG;AAOH;IAgBE,uBAAmB,OAAsB,EAAS,OAAgB,EAAQ,SAAoB,EAAQ,eAA+B;QAAlH,YAAO,GAAP,OAAO,CAAe;QAAS,YAAO,GAAP,OAAO,CAAS;QAAQ,cAAS,GAAT,SAAS,CAAW;QAAQ,oBAAe,GAAf,eAAe,CAAgB;QAXrI,YAAO,GAAG,GAAG,GAAE,WAAW,CAAC;QAazB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,GAAE,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzC,OAAO,CAAC,GAAG,CAAC,WAAW,GAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,WAAW,GAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACzC,OAAO,CAAC,GAAG,CAAC,WAAW,GAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,WAAW,GAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC1C,OAAO,CAAC,GAAG,CAAC,UAAU,GAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,wCAAgB,GAAhB;QAAA,iBAmHC;QAlHC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,EAAE;YACzB,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;QACP,EAAE,EAAC,OAAO,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,EAAC;YAEvC,EAAE,EAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,EAAC;gBAC/B,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBAGtB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;oBAC7C,KAAI,CAAC,UAAU,GAAG,UAAU,CAAC;oBAC7B,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;oBAE7B,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;wBACxC,EAAE,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,KAAI,CAAC,MAAM,CAAC,EAAC;4BAClC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,GAAC,GAAG,GAAC,CAAC,KAAI,CAAC,QAAQ,GAAC,CAAC,CAAC,CAAC;wBAC9D,CAAC;oBACH,CAAC;oBAED,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC;gBAChD,CAAC,CAAC,CAAC;YAEL,CAAC;QACH,CAAC;QAED,OAAO;QACP,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;YAC7C,KAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,EAAE,EAAC,UAAU,IAAI,IAAI,CAAC,EAAC;gBACrB,EAAE,EAAC,OAAO,KAAI,CAAC,KAAK,KAAK,WAAW,CAAC,EAAC;4CAC5B,CAAC;wBACP,EAAE,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,KAAI,CAAC,MAAM,CAAC,EAAC;4BAChC,EAAE,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,KAAI,CAAC,KAAK,CAAC,EAAC;gCACpC,EAAE,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,QAAQ,GAAC,CAAC,CAAC,CAAC,EAAC;oCAC9C,EAAE,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,EAAC;wCACnC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC;wCACtC,UAAU,GAAG,CAAC,CAAC;wCACf,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAC,KAAI,CAAC,UAAU,CAAC,CAAC;wCAC/C,qBAAqB;wCACrB,EAAE,EAAC,KAAI,CAAC,WAAW,IAAI,SAAS,CAAC,EAAC;4CAC9B,IAAI,cAAY,GAAG,CAAC;oDAClB,SAAS,EAAE,KAAI,CAAC,MAAM;oDACtB,KAAK,EAAE,KAAI,CAAC,KAAK,GAAC,GAAG,GAAC,CAAC,KAAI,CAAC,QAAQ,GAAC,CAAC,CAAC;oDACvC,KAAK,EAAE,KAAI,CAAC,KAAK;iDAClB,CAAC;4CACE,QAAQ,GAAG,UAAC,MAAM;gDACpB,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAC,cAAY,CAAC,CAAC;4CACpD,CAAC;4CACD,KAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,QAAQ,EAAC,cAAY,CAAC,CAAC;wCACjE,CAAC;oCACH,CAAC;oCAAA,IAAI,EAAC;wCACJ,UAAU,GAAG,CAAC,CAAC;oCACjB,CAAC;gCACH,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;wBAXiB,QAAQ;oBAf5B,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAC,CAAC,EAAE;gCAAhC,CAAC;qBA0BN;oBAEL,EAAE,EAAC,UAAU,IAAI,CAAC,CAAC,EAAC;wBAClB,qBAAqB;wBACrB,EAAE,EAAC,KAAI,CAAC,WAAW,IAAI,SAAS,CAAC,EAAC;4BAChC,IAAI,cAAY,GAAG,CAAC;oCAClB,SAAS,EAAE,KAAI,CAAC,MAAM;oCACtB,KAAK,EAAE,KAAI,CAAC,KAAK,GAAC,GAAG,GAAC,CAAC,KAAI,CAAC,QAAQ,GAAC,CAAC,CAAC;oCACvC,KAAK,EAAE,KAAI,CAAC,KAAK;iCAClB,CAAC;4BACF,IAAI,QAAQ,GAAG,UAAC,MAAM;gCAClB,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAC,cAAY,CAAC,CAAC;4BACtD,CAAC;4BACD,KAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,QAAQ,EAAC,cAAY,CAAC,CAAC;wBAC/D,CAAC;wBAED,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC;4BACnB,EAAE,EAAE,KAAI,CAAC,MAAM;4BACf,KAAK,EAAG,KAAI,CAAC,KAAK;4BAClB,QAAQ,EAAG,CAAC,KAAI,CAAC,QAAQ,GAAC,CAAC,CAAC;4BAC5B,KAAK,EAAG,KAAI,CAAC,KAAK;yBACnB,CAAC,CAAC;wBAEH,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAC,KAAI,CAAC,UAAU,CAAC,CAAC;oBAC/C,CAAC;gBACL,CAAC;YACH,CAAC;QAGD,CAAC,CAAC,CAAC;QACH,iBAAiB;QACjB,EAAE,EAAC,OAAO,IAAI,CAAC,aAAa,KAAK,WAAW,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;YAC7E,IAAI,aAAW,GAAG,CAAC;oBACjB,MAAM,EAAE,IAAI,CAAC,WAAW;oBACxB,SAAS,EAAC,IAAI,CAAC,aAAa;iBAC7B,CAAC;YACF,IAAI,QAAQ,GAAG,UAAC,MAAM;gBACpB,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAC,aAAW,CAAC,CAAC;YACpD,CAAC;YACD,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,QAAQ,EAAC,aAAW,CAAC,CAAC;QAC/D,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAC;YACpB,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;QAEzD,CAAC;QAAA,IAAI,CAAC,CAAC;YACL,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC;QAC1B,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,EAAC;YAClB,IAAI,CAAC,OAAO,GAAG,GAAG,GAAE,gBAAgB,CAAC;QACvC,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,EAAC;YACxB,IAAI,CAAC,OAAO,GAAG,GAAG,GAAE,WAAW,CAAC;QAClC,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,OAAO,GAAI,GAAG,GAAE,WAAW,CAAC;QACnC,CAAC;IAEH,CAAC;IAED,sCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;IAC9C,CAAC;IAED,+BAAO,GAAP;QACG,EAAE,EAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAC;YACtB,EAAE,EAAC,OAAO,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,EAAC;gBACzC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,EAAC;oBAChC,+BAA+B;oBAC/B,KAAK,EAAG,IAAI,CAAC,KAAK;oBAClB,SAAS,EAAE,IAAI,CAAC,SAAS;iBAC1B,CAAC,CAAC;YACF,CAAC;YAAA,IAAI,EAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAClC,CAAC;QACJ,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAC;gBAC7B,IAAI,EAAE,IAAI,CAAC,IAAI;aAIhB,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,+BAAO,GAAP;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAClC,CAAC;IAED,gCAAQ,GAAR;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IArLU,aAAa;QAJzB,wEAAS,CAAC;YACT,QAAQ,EAAE,gBAAgB;WACG;SAC9B,CAAC;sBAiBqI;OAhB1H,aAAa,CAuLzB;IAAD,CAAC;AAAA;SAvLY,aAAa,e","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { EndsubonePage } from './endsubone';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EndsubonePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(EndsubonePage),\r\n  ],\r\n})\r\nexport class EndsubonePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/endsubone/endsubone.module.ts","import { CallApiProvider } from './../../providers/call-api/call-api';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { PlaygamePage } from './../playgame/playgame';\r\nimport { EndonePage } from './../endone/endone';\r\nimport { MenuPage } from '../menu/menu';\r\nimport { MapPage } from '../map/map';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n/**\r\n * Generated class for the EndsubonePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-endsubone',\r\n  templateUrl: 'endsubone.html',\r\n})\r\nexport class EndsubonePage {\r\n  totalscore;\r\n  score;\r\n  state;\r\n  substate;\r\n  textwin = \" \"+ \"がんばりましょう。\";\r\n  foot;\r\n  data;\r\n  idCode;\r\n  stagestore;\r\n  lastStage;\r\n  stageTable;\r\n  scoreTable;\r\n  staticForSave;\r\n  typeForSave;\r\n\r\n  constructor(public navCtrl: NavController, public storage: Storage,public navParams: NavParams,public CallApiProvider:CallApiProvider,\r\n        ) {\r\n    this.data = navParams.get('data');\r\n    this.state = navParams.get('state');\r\n    this.substate = navParams.get('substate');\r\n    this.score = navParams.get('score');\r\n    this.totalscore = navParams.get('totalscore');\r\n    this.lastStage =navParams.get('lastStage');\r\n    this.staticForSave = navParams.get('static');\r\n    this.typeForSave = navParams.get('type');\r\n    console.log(\"end state\"+ this.state);\r\n    console.log(\"end state\"+ this.lastStage);\r\n    console.log(\"end score\"+ this.score);\r\n    console.log(\"end total\"+ this.totalscore);\r\n    console.log(\"end data\"+ this.data);    \r\n  }\r\n\r\n  ionViewWillEnter(){ \r\n    this.storage.get('id').then((id)=> {\r\n          this.idCode = id;\r\n        });\r\n    if(typeof this.lastStage != 'undefined'){\r\n\r\n      if(this.lastStage <= this.state){\r\n        console.log(\"GGGG\");\r\n          \r\n      \r\n      this.storage.get('stageTable').then((stageTable)=> {\r\n        this.stageTable = stageTable;\r\n        console.log(this.stageTable);\r\n        \r\n        for(let i = 0; i < stageTable.length;i++){\r\n          if(stageTable[i].id == this.idCode){\r\n            this.stageTable[i].stage = this.state+\"-\"+(this.substate-1);\r\n          }\r\n        }\r\n          \r\n        console.log(this.stageTable);\r\n        this.storage.set('stageTable', this.stageTable);\r\n        });\r\n\r\n      }\r\n    }\r\n\r\n    //score\r\n    let checkscore = 0;\r\n    this.storage.get('scoreTable').then((scoreTable)=> {\r\n      this.scoreTable = scoreTable;    \r\n      if(scoreTable != null){\r\n        if(typeof this.score !== 'undefined'){    \r\n          for(let i = 0; i < scoreTable.length;i++){\r\n            if(scoreTable[i].id == this.idCode){\r\n                if(scoreTable[i].stage == this.state){\r\n                  if(scoreTable[i].substage == (this.substate-1)){\r\n                    if(scoreTable[i].score < this.score){\r\n                      this.scoreTable[i].score = this.score;\r\n                      checkscore = 1;\r\n                      this.storage.set('scoreTable',this.scoreTable);\r\n                      //saveScoreIndatabase\r\n                      if(this.typeForSave == \"student\"){ \r\n                          let scoreForSave = [{\r\n                            studentID: this.idCode,\r\n                            stage: this.state+\"-\"+(this.substate-1),\r\n                            score: this.score\r\n                          }] \r\n                          var callback = (result) =>{        \r\n                            console.log(\"saveScoreInDatabase: \",scoreForSave); \r\n                          }\r\n                          this.CallApiProvider.getCallScoreSave(callback,scoreForSave);               \r\n                      }\r\n                    }else{\r\n                      checkscore = 2;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n        \r\n        if(checkscore == 0){\r\n          //saveScoreIndatabase\r\n          if(this.typeForSave == \"student\"){        \r\n            let scoreForSave = [{\r\n              studentID: this.idCode,\r\n              stage: this.state+\"-\"+(this.substate-1),\r\n              score: this.score\r\n            }]\r\n            var callback = (result) =>{        \r\n                console.log(\"saveScoreInDatabase: \",scoreForSave); \r\n            }\r\n            this.CallApiProvider.getCallScoreSave(callback,scoreForSave); \r\n          }\r\n\r\n          this.scoreTable.push({\r\n            id: this.idCode,\r\n            stage : this.state,\r\n            substage : (this.substate-1),\r\n            score : this.score            \r\n          });\r\n\r\n          this.storage.set('scoreTable',this.scoreTable);\r\n          }  \r\n      }    \r\n    }\r\n      \r\n\r\n    });\r\n    //static save    \r\n    if(typeof this.staticForSave !== 'undefined' && this.staticForSave.length > 0){\r\n      let staticVocab = [{\r\n        \"type\": this.typeForSave,\r\n        \"mistake\":this.staticForSave\r\n      }]\r\n      var callback = (result) =>{        \r\n        console.log(\"saveStaticInDatabase: \",staticVocab);\r\n      }\r\n      this.CallApiProvider.getCallStaticSave(callback,staticVocab);\r\n    }\r\n\r\n    if(this.substate < 4){\r\n      this.foot = \"next \" + this.state + \"-\" + this.substate;\r\n   \r\n    }else {\r\n      this.foot = \"END STATE\";\r\n    }\r\n    if(this.score > 18){\r\n      this.textwin = \" \"+ \"たいへん よく できました。\";\r\n    }else if(this.score > 16){\r\n      this.textwin = \" \"+ \"よく できました。\";\r\n    }else{ \r\n      this.textwin  = \" \"+ \"がんばりましょう。\";\r\n    }\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad EndsubonePage');\r\n  }\r\n\r\n  dismiss(){  \r\n     if(this.substate == 4){\r\n      if(typeof this.lastStage != 'undefined'){\r\n      this.navCtrl.setRoot('EndonePage',{\r\n        // totalscore: this.totalscore,\r\n        state : this.state,\r\n        lastStage: this.lastStage\r\n      }); \r\n       }else{\r\n         this.navCtrl.setRoot('MapPage');\r\n       }\r\n    }else{\r\n      this.navCtrl.setRoot('MapPage',{\r\n        data: this.data,\r\n        // state: this.state,\r\n        // substate: this.substate,\r\n        // totalscore: this.totalscore\r\n      });   \r\n    } \r\n  }\r\n\r\n  openmap(){\r\n    this.navCtrl.setRoot('MapPage');\r\n  }\r\n\r\n  openmenu(){\r\n    this.navCtrl.setRoot('MenuPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/endsubone/endsubone.ts"],"sourceRoot":""}